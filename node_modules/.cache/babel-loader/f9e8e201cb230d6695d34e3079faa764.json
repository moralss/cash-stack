{"ast":null,"code":"import _objectWithoutProperties from \"/home/moral/workspace/start/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/home/moral/workspace/start/src/routes/index.jsx\";\nimport React from \"react\";\nimport { Router, Route, Redirect } from \"react-router-dom\";\nimport Register from \"../components/Register\";\nimport history from \"./history.js\";\nimport Navbar from \"../components/Navbar\"; // import jwtDecode from \"jwt-decode\";\n\nimport HomePage from \"../components/HomePage\";\nimport Login from \"../components/Login\";\nimport Dashboard from \"../components/Dashboard\";\nimport store from \"../store\";\nimport { AUTHENTICATED } from \"../actionTypes\";\nconst user = localStorage.getItem(\"user\");\n\nif (user) {\n  store.dispatch({\n    type: AUTHENTICATED,\n    payload: {\n      auth: true\n    }\n  });\n}\n\nconst token = localStorage.getItem(\"user\");\n\nconst authenticatedUser = () => {\n  let decodedToken; // if (token) {\n  //   decodedToken = jwtDecode(token);\n  //   let currentDate = Date.now() / 1000;\n  //   if (decodedToken.lat > currentDate) {\n  //     store.dispatch({ type: actions.AUTHENTICATED, payload: false });\n  //     store.dispatch({ type: actions.AUTHENTICATED, payload: false });\n  //     return;\n  //   }\n\n  if (!token) {\n    store.dispatch({\n      type: AUTHENTICATED,\n      auth: false\n    });\n    store.dispatch({\n      type: AUTHENTICATED,\n      auth: false\n    });\n    return;\n  }\n};\n\nauthenticatedUser();\nexport const callCheck = async () => {// const check = await checkUser();\n  // return check\n};\n\nconst PrivateRoute = (_ref) => {\n  let Component = _ref.component,\n      rest = _objectWithoutProperties(_ref, [\"component\"]);\n\n  let authenticated = store.getState().user.auth;\n  console.log(\"authenticated\", authenticated);\n  return React.createElement(Route, Object.assign({}, rest, {\n    render: props => authenticated.auth === true ? React.createElement(Route, Object.assign({}, rest, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    })) : React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }));\n};\n\nconst mainRoute = () => {\n  return React.createElement(Router, {\n    history: history,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(Navbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(Route, {\n    exact: true,\n    path: \"/register\",\n    component: props => React.createElement(Register, Object.assign({}, props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: props => React.createElement(HomePage, Object.assign({}, props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/login\",\n    component: props => React.createElement(Login, Object.assign({}, props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), React.createElement(PrivateRoute, {\n    exact: true,\n    path: \"/dashboard\",\n    component: props => React.createElement(Dashboard, Object.assign({}, props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  })));\n};\n\nexport default mainRoute;","map":{"version":3,"sources":["/home/moral/workspace/start/src/routes/index.jsx"],"names":["React","Router","Route","Redirect","Register","history","Navbar","HomePage","Login","Dashboard","store","AUTHENTICATED","user","localStorage","getItem","dispatch","type","payload","auth","token","authenticatedUser","decodedToken","callCheck","PrivateRoute","Component","component","rest","authenticated","getState","console","log","props","mainRoute"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,EAAiBC,KAAjB,EAAwBC,QAAxB,QAAwC,kBAAxC;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,OAAP,MAAoB,cAApB;AACA,OAAOC,MAAP,MAAmB,sBAAnB,C,CACA;;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,SAASC,aAAT,QAA8B,gBAA9B;AACA,MAAMC,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb;;AAEA,IAAIF,IAAJ,EAAU;AACRF,EAAAA,KAAK,CAACK,QAAN,CAAe;AAAEC,IAAAA,IAAI,EAAEL,aAAR;AAAuBM,IAAAA,OAAO,EAAE;AAAEC,MAAAA,IAAI,EAAE;AAAR;AAAhC,GAAf;AACD;;AAED,MAAMC,KAAK,GAAGN,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAd;;AAEA,MAAMM,iBAAiB,GAAG,MAAM;AAC9B,MAAIC,YAAJ,CAD8B,CAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAI,CAACF,KAAL,EAAY;AACVT,IAAAA,KAAK,CAACK,QAAN,CAAe;AAAEC,MAAAA,IAAI,EAAEL,aAAR;AAAuBO,MAAAA,IAAI,EAAE;AAA7B,KAAf;AACAR,IAAAA,KAAK,CAACK,QAAN,CAAe;AAAEC,MAAAA,IAAI,EAAEL,aAAR;AAAuBO,MAAAA,IAAI,EAAE;AAA7B,KAAf;AACA;AACD;AACF,CAhBD;;AAkBAE,iBAAiB;AAEjB,OAAO,MAAME,SAAS,GAAG,YAAY,CACnC;AACA;AACD,CAHM;;AAKP,MAAMC,YAAY,GAAG,UAAuC;AAAA,MAAzBC,SAAyB,QAApCC,SAAoC;AAAA,MAAXC,IAAW;;AAC1D,MAAIC,aAAa,GAAGjB,KAAK,CAACkB,QAAN,GAAiBhB,IAAjB,CAAsBM,IAA1C;AACAW,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BH,aAA7B;AAEA,SACE,oBAAC,KAAD,oBACMD,IADN;AAEE,IAAA,MAAM,EAAEK,KAAK,IACXJ,aAAa,CAACT,IAAd,KAAuB,IAAvB,GAA8B,oBAAC,KAAD,oBAAWQ,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA9B,GAAoD,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADF;AAQD,CAZD;;AAcA,MAAMM,SAAS,GAAG,MAAM;AACtB,SACE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAE3B,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,KAAD;AACE,IAAA,KAAK,MADP;AAEE,IAAA,IAAI,EAAC,WAFP;AAGE,IAAA,SAAS,EAAE0B,KAAK,IAAI,oBAAC,QAAD,oBAAcA,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAHtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAME,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAC,GAAlB;AAAsB,IAAA,SAAS,EAAEA,KAAK,IAAI,oBAAC,QAAD,oBAAcA,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,EAOE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAC,QAAlB;AAA2B,IAAA,SAAS,EAAEA,KAAK,IAAI,oBAAC,KAAD,oBAAWA,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,EAQE,oBAAC,YAAD;AACE,IAAA,KAAK,MADP;AAEE,IAAA,IAAI,EAAC,YAFP;AAGE,IAAA,SAAS,EAAEA,KAAK,IAAI,oBAAC,SAAD,oBAAeA,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAHtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,CAFF,CADF;AAmBD,CApBD;;AAsBA,eAAeC,SAAf","sourcesContent":["import React from \"react\";\nimport { Router, Route, Redirect } from \"react-router-dom\";\nimport Register from \"../components/Register\";\nimport history from \"./history.js\";\nimport Navbar from \"../components/Navbar\";\n// import jwtDecode from \"jwt-decode\";\nimport HomePage from \"../components/HomePage\";\nimport Login from \"../components/Login\";\nimport Dashboard from \"../components/Dashboard\";\nimport store from \"../store\";\nimport { AUTHENTICATED } from \"../actionTypes\";\nconst user = localStorage.getItem(\"user\");\n\nif (user) {\n  store.dispatch({ type: AUTHENTICATED, payload: { auth: true } });\n}\n\nconst token = localStorage.getItem(\"user\");\n\nconst authenticatedUser = () => {\n  let decodedToken;\n  // if (token) {\n  //   decodedToken = jwtDecode(token);\n  //   let currentDate = Date.now() / 1000;\n  //   if (decodedToken.lat > currentDate) {\n  //     store.dispatch({ type: actions.AUTHENTICATED, payload: false });\n  //     store.dispatch({ type: actions.AUTHENTICATED, payload: false });\n  //     return;\n  //   }\n\n  if (!token) {\n    store.dispatch({ type: AUTHENTICATED, auth: false });\n    store.dispatch({ type: AUTHENTICATED, auth: false });\n    return;\n  }\n};\n\nauthenticatedUser();\n\nexport const callCheck = async () => {\n  // const check = await checkUser();\n  // return check\n};\n\nconst PrivateRoute = ({ component: Component, ...rest }) => {\n  let authenticated = store.getState().user.auth;\n  console.log(\"authenticated\", authenticated);\n\n  return (\n    <Route\n      {...rest}\n      render={props =>\n        authenticated.auth === true ? <Route {...rest} /> : <Redirect to=\"/\" />\n      }\n    />\n  );\n};\n\nconst mainRoute = () => {\n  return (\n    <Router history={history}>\n      <Navbar />\n      <div>\n        <Route\n          exact\n          path=\"/register\"\n          component={props => <Register {...props} />}\n        />\n        <Route exact path=\"/\" component={props => <HomePage {...props} />} />\n        <Route exact path=\"/login\" component={props => <Login {...props} />} />\n        <PrivateRoute\n          exact\n          path=\"/dashboard\"\n          component={props => <Dashboard {...props} />}\n        />\n      </div>\n    </Router>\n  );\n};\n\nexport default mainRoute;\n"]},"metadata":{},"sourceType":"module"}